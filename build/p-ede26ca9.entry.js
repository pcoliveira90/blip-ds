import{r as s,c as t,h as i,H as h}from"./p-ba441ad3.js";import{w as e,e as n}from"./p-d7b37f79.js";const a=class{constructor(i){s(this,i),this.bdsChange=t(this,"bdsChange",7),this.bdsChangeChips=t(this,"bdsChangeChips",7),this.bdsBlur=t(this,"bdsBlur",7),this.bdsSubmit=t(this,"bdsSubmit",7),this.internalChips=[],this.chips=[],this.type="text",this.label="",this.icon="",this.delimiters=/,|;/,this.errorMessage="",this.danger=!1,this.value="",this.duplicated=!1,this.disableSubmit=!1}valueChanged(){if(this.chips)if("string"==typeof this.chips)try{this.internalChips=JSON.parse(this.chips)}catch(s){this.internalChips=[]}else this.internalChips=this.chips;else this.internalChips=[]}internalValueChanged(){this.bdsChangeChips.emit({data:this.internalChips,value:this.getLastChip()})}async isValid(){return this.validateChips()}async get(){return this.internalChips}async clear(){this.internalChips=[],this.value=""}async add(s){this.setChip(s)}async setFocus(){this.nativeInput.setFocus()}async removeFocus(){this.nativeInput.removeFocus()}componentWillLoad(){this.valueChanged()}validateChips(){return"email"!==this.type||!this.internalChips.some((s=>!this.validateChip(s)))}handleOnBlur(){this.bdsBlur.emit(this.internalChips)}handleAddChip(s){if(this.disableSubmit)return;const{detail:{value:t}}=s;this.setChip(t),this.value=""}getLastChip(){return this.internalChips[this.internalChips.length-1]}handleBackRemove(s){const{detail:{value:t}}=s;(null===t||t.length<=0)&&this.internalChips.length&&(this.removeLastChip(),this.bdsChangeChips.emit({data:this.internalChips,value:t}))}verifyAndSubstituteDelimiters(s){if(1===s.length&&s[0].match(this.delimiters))return"";let t=s.replace(/;/g,",").replace(/\,+|;+/g,",");return t[0].match(this.delimiters)&&(t=t.substring(1)),t}async handleChange(s){const{detail:{value:t}}=s;if(this.value=t?t.trim():"",0===t.length)return;if(!t.match(this.delimiters))return;const i=this.verifyAndSubstituteDelimiters(t);i?(i.split(this.delimiters).forEach((s=>{this.setChip(s)})),this.clearInputValues()):this.clearInputValues()}clearInputValues(s=""){this.nativeInput.value=s,this.value=s}setChip(s){!this.duplicated&&this.internalChips.some((t=>t.toLowerCase()===s.toLowerCase()))||e(s)&&(this.internalChips=[...this.internalChips,s])}validateChip(s){const t=s.trim();return"email"!==this.type||!n(t)}removeLastChip(){this.internalChips=this.internalChips.slice(0,this.internalChips.length-1)}removeChip(s){const{detail:{id:t}}=s;this.internalChips=this.internalChips.filter(((s,i)=>i.toString()!==t))}renderChips(){return this.internalChips.length?this.internalChips.map(((s,t)=>{const h=t.toString();return i("bds-chip",{class:"input-chips__chip",id:h,key:h,variant:"primary",danger:!this.validateChip(s),deletable:!0,onBdsDelete:s=>this.removeChip(s)},s)})):[]}render(){return i(h,null,i("bds-input",{ref:s=>this.nativeInput=s,icon:this.icon,label:this.label,onBdsKeyDownBackspace:s=>this.handleBackRemove(s),onBdsSubmit:s=>this.handleAddChip(s),onBdsOnBlur:()=>this.handleOnBlur(),onBdsChange:s=>this.handleChange(s),maxlength:this.maxlength,value:this.value,"error-message":this.errorMessage,danger:this.danger,chips:!0},i("span",{slot:"inside-input-left"},this.renderChips()),i("div",{slot:"input-right"},i("slot",{name:"input-right"}))))}static get watchers(){return{chips:["valueChanged"],internalChips:["internalValueChanged"]}}};a.style=".sc-bds-input-chips-h{display:block}.input-chips__chip.sc-bds-input-chips{margin:2px 4px 2px 0px}.input-chips__chips.sc-bds-input-chips{-ms-flex:1;flex:1}";export{a as bds_input_chips}